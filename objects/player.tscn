[gd_scene load_steps=15 format=3 uid="uid://r3wp4bjkcas0"]

[ext_resource type="Texture2D" uid="uid://co3au8m4vt65v" path="res://sprites/player.png" id="1_eqqp1"]
[ext_resource type="Script" uid="uid://qpxfwcicddny" path="res://objects/player.gd" id="1_ykyjo"]
[ext_resource type="Texture2D" uid="uid://0vmh4wy05uds" path="res://sprites/pow.png" id="3_uxov2"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ykyjo"]
size = Vector2(36, 20)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_eqqp1"]
size = Vector2(20, 56)

[sub_resource type="Animation" id="Animation_ykyjo"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("flip/shoot-area/shape:disabled")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("flip/sprite:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}

[sub_resource type="Animation" id="Animation_charging"]
resource_name = "charging"
length = 0.1
loop_mode = 1
step = 0.125
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("flip/sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [16]
}

[sub_resource type="Animation" id="Animation_falling"]
resource_name = "falling"
length = 0.1
loop_mode = 1
step = 0.125
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("flip/sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [6]
}

[sub_resource type="Animation" id="Animation_idle"]
resource_name = "idle"
length = 1.00005
loop_mode = 1
step = 0.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("flip/sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [0, 1]
}

[sub_resource type="Animation" id="Animation_jump"]
resource_name = "jump"
length = 0.1
loop_mode = 1
step = 0.125
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("flip/sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [5]
}

[sub_resource type="Animation" id="Animation_ready_to_shoot"]
resource_name = "ready_to_shoot"
length = 0.1
loop_mode = 1
step = 0.125
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("flip/sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [15]
}

[sub_resource type="Animation" id="Animation_run"]
resource_name = "run"
length = 0.5
loop_mode = 1
step = 0.125
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("flip/sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.125, 0.25, 0.375),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [10, 11, 12, 13]
}

[sub_resource type="Animation" id="Animation_shooting"]
resource_name = "shooting"
length = 0.375006
step = 0.0625
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("flip/sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.0625, 0.125),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 1,
"values": [17, 18, 19]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("flip/shoot-area/shape:disabled")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.0625),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [false, true]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_eqqp1"]
_data = {
&"RESET": SubResource("Animation_ykyjo"),
&"charging": SubResource("Animation_charging"),
&"falling": SubResource("Animation_falling"),
&"idle": SubResource("Animation_idle"),
&"jump": SubResource("Animation_jump"),
&"ready_to_shoot": SubResource("Animation_ready_to_shoot"),
&"run": SubResource("Animation_run"),
&"shooting": SubResource("Animation_shooting")
}

[node name="player" type="CharacterBody2D" node_paths=PackedStringArray("flip_node", "animation", "sprite", "shoot_strength_bar", "pow", "shoot_area_shape") groups=["player"]]
collision_layer = 2
collision_mask = 9
script = ExtResource("1_ykyjo")
flip_node = NodePath("flip")
animation = NodePath("animation")
sprite = NodePath("flip/sprite")
shoot_strength_bar = NodePath("shoot-strength")
pow = NodePath("pow")
shoot_area_shape = NodePath("flip/shoot-area/shape")

[node name="flip" type="Node2D" parent="."]

[node name="sprite" type="Sprite2D" parent="flip"]
position = Vector2(0, -32)
texture = ExtResource("1_eqqp1")
hframes = 5
vframes = 4

[node name="shoot-area" type="Area2D" parent="flip"]
collision_layer = 0
collision_mask = 4

[node name="shape" type="CollisionShape2D" parent="flip/shoot-area"]
position = Vector2(8, -10)
shape = SubResource("RectangleShape2D_ykyjo")
disabled = true

[node name="shape" type="CollisionShape2D" parent="."]
position = Vector2(0, -28)
shape = SubResource("RectangleShape2D_eqqp1")

[node name="animation" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_eqqp1")
}
autoplay = "idle"

[node name="shoot-strength" type="ProgressBar" parent="."]
visible = false
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -10.0
offset_top = -69.0
offset_right = 10.0
offset_bottom = -65.0
grow_horizontal = 2
grow_vertical = 0
show_percentage = false

[node name="pow" type="Sprite2D" parent="."]
visible = false
z_index = 100
texture = ExtResource("3_uxov2")

[connection signal="body_entered" from="flip/shoot-area" to="." method="_on_shootarea_body_entered"]
[connection signal="animation_finished" from="animation" to="." method="_on_animation_animation_finished"]
